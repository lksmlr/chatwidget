<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KIWI - KI Chatbot Widget</title>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,300,0,0" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <script>   
        window.BASE_URL = "{{ base_url }}";
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/latex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@2.4.0/dist/purify.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="{{ base_url }}/static/style.final.css">
    <script type="module" src="{{ base_url }}/static/app.js" defer></script>
</head>
<body class="all-elements">
<div class="screenshot-overlay" id="screenshot-overlay" style="display: none;">
    <div class="selection-box" id="selection-box"></div>
</div>
<div class="chat-widget hidden" id="chat-widget">
    <div class="chat-header">
        <div class="info-button" id="info-button">
            <span class="material-symbols-outlined left-icon">info</span>
            <div class="info-tooltip" role="tooltip" aria-hidden="true">
                <ul class="tooltip-list">
                    <li class="tooltip-list-item"><strong>Chatbot Buttons Erkl√§rung</strong></li>
                    <li class="tooltip-list-item"><span class="material-symbols-outlined">upload_file</span><span class="tooltip-text">Datei hochladen</span></li>
{#                    <li class="tooltip-list-item"><span class="material-symbols-outlined">screenshot_frame</span><span class="tooltip-text">Screenshot der Webseite</span></li>#}
{#                    <li class="tooltip-list-item"><span class="material-symbols-outlined">screenshot_monitor</span><span class="tooltip-text">Screenshot des Monitors</span></li>#}
                    <li class="tooltip-list-item"><span class="material-symbols-outlined">public</span><span class="tooltip-text">Websuche starten</span></li>
                    <li class="tooltip-list-item"><span class="material-symbols-outlined">book</span><span class="tooltip-text">Wissensbasis ausw√§hlen</span></li>
                    <li class="tooltip-list-item"><span class="material-symbols-outlined">send</span><span class="tooltip-text">Nachricht abschicken</span></li>
                    <li class="tooltip-list-item"><span class="material-symbols-outlined">delete</span><span class="tooltip-text">Chatverlauf l√∂schen</span></li>
                    <li class="tooltip-list-item"><span class="material-symbols-outlined">playlist_remove</span><span class="tooltip-text">optionale Collection l√∂schen</span></li>
                </ul>
            </div>
        </div>

        <h2 class="chat-title" id="chatbot_name">Chatbot</h2>
        <span class="material-symbols-outlined right-icon" id="clear-button">delete</span>
        <h3 class="chat-subtitle" id="selected_collection">keine Wissensbasis</h3>
    </div>

        <ul class="chatbox">
            <li class="chat outgoing">
                <span class="material-symbols-outlined chat-timestamp">smart_toy</span>
                <div class="message-container" id="welcome_message">Hallo ich bin ein Chatbot. Wie kann ich helfen?</div>
            </li>
        </ul>
        <div class="chat-input" id="chat-input">
            <div class="preview-container" id="preview-container"></div>
            <textarea id="chat-textarea" class="chat-textarea" rows="1" placeholder="Stellen Sie eine Frage ..." required></textarea>
            <div class="chat-input-icons">
                <div class="upload-file-wrapper">
                    <input type="file" id="file-input" accept="image/*, .pdf, .txt, .csv" hidden>
                    <span class="material-symbols-outlined input-icon" id="file-upload">upload_file</span>
                </div>
                <span id="globe-button" class="material-symbols-outlined input-icon">public</span>
                <span id="menu-button" class="material-symbols-outlined input-icon">Book</span>
                <ul class="menu hidden" id="menuList">
                    <li class="menu-item">
                         <div id="customDropdown" class="custom-dropdown">
                            <div id="dropdownSelected" class="dropdown-selected">Select ...</div>
                            <div id="dropdownOptions" class="dropdown-options hidden">
                            <div class="dropdown-option" data-value="key">üîë Key</div>
                            </div>
                        </div>
                    </li>
                    <li class="menu-item">
                        <div class="key-input-wrapper" id="keyInputWrapper" hidden>
                            <input type="text" class="key-input" id="keyInput" placeholder="Insert Key...">
                            <button id="key-submit" class="key-submit">Submit</button>
                        </div>
                    </li>
                </ul>

            <span class="material-symbols-outlined send-button" id="send-button">send</span>
        </div>
    </div>
    <div class="resize-handle top-left"></div>
    <div class="resize-handle top"></div>
    <div class="resize-handle left"></div>
</div>
<div class="widget-toggler" id="widget-toggler">
    <span class="material-symbols-outlined toggler-icon">mode_comment</span>
    <span class="material-symbols-outlined toggler-icon">close</span>
</div>
</body>
</html>